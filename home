<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ZenPen Clone</title>
  <style>
    :root {
      --bg: #111;
      --text: #f5f5f5;
      --toolbar: #222;
      --button: #444;
      --button-text: #f5f5f5;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: var(--bg);
      color: var(--text);
      font-family: 'Georgia', serif;
    }

    #tabs, #toolbar {
      display: none;
    }

    #editor {
      padding: 40px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      outline: none;
      font-size: 1.2rem;
      line-height: 1.6;
      text-align: left;
    }

    #save {
      position: fixed;
      top: 10px;
      right: 10px;
      background: var(--button);
      color: var(--button-text);
      padding: 8px 15px;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      z-index: 1000;
    }

    #editor h1 {
      font-size: 2rem;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

  <div id="editor" contenteditable="true">
    <h1>Put a title here</h1>
    <p>Start writing here...</p>
  </div>

  <button id="save" onclick="saveAsPDF()">Save</button>

  <script>
    function saveAsPDF() {
      const content = document.getElementById('editor').innerHTML;
      const style = `
        <style>
          body { font-family: Georgia, serif; line-height: 1.6; color: #000; padding: 40px; }
          h1 { font-size: 2rem; margin-bottom: 20px; }
        </style>
      `;
      const win = window.open('', '', 'height=700,width=900');
      win.document.write('<html><head><title>Note</title>');
      win.document.write(style);
      win.document.write('</head><body>');
      win.document.write(content);
      win.document.write('</body></html>');
      win.document.close();
      win.focus();
      win.print();
      win.close();
    }

    window.onload = () => {
      const savedContent = localStorage.getItem('note-0');
      document.getElementById('editor').innerHTML = savedContent || '<h1>Put a title here</h1><p>Start writing here...</p>';
    };

    document.getElementById('editor').addEventListener('input', () => {
      localStorage.setItem('note-0', document.getElementById('editor').innerHTML);
    });

    document.getElementById('editor').addEventListener('keydown', function(e) {
      if (e.key === ' ' || e.key === 'Enter') {
        const selection = window.getSelection();
        const range = selection.getRangeAt(0);
        const node = range.startContainer;
        const paragraph = node.nodeType === 3 ? node.parentNode : node;

        if (paragraph && paragraph.textContent.trim().startsWith('-')) {
          e.preventDefault();
          const content = paragraph.textContent.trim().substring(1).trim();
          const ul = document.createElement('ul');
          const li = document.createElement('li');
          li.textContent = content || ' ';
          ul.appendChild(li);
          paragraph.replaceWith(ul);

          placeCursorAtEnd(li);
        } else if (/^\d+\./.test(paragraph.textContent.trim())) {
          e.preventDefault();
          const content = paragraph.textContent.trim().replace(/^\d+\.\s*/, '');
          const ol = document.createElement('ol');
          const li = document.createElement('li');
          li.textContent = content || ' ';
          ol.appendChild(li);
          paragraph.replaceWith(ol);

          placeCursorAtEnd(li);
        }
      }
    });

    function placeCursorAtEnd(el) {
      const range = document.createRange();
      const sel = window.getSelection();
      range.selectNodeContents(el);
      range.collapse(false);
      sel.removeAllRanges();
      sel.addRange(range);
    }
  </script>

</body>
</html>
